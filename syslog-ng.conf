@version: 3.5

options {
  chain_hostnames(off);
  flush_lines(0);
  use_dns(no);
  use_fqdn(no);
  owner("root");
  group("adm");
  perm(0640);
  stats_freq(0);
  bad_hostname("^gconfd$");
};

source s_all {
  # messages generated by syslog
  internal();

  # public clients
  udp(ip(0.0.0.0) port(514));
  tcp(ip(0.0.0.0) port(514) log_iw_size(102400) max-connections(1024));
};

destination d_all {
  file("/srv/syslog/everything.log"
    template("${YEAR}-${MONTH}-${DAY} ${HOUR}:${MIN}:${SEC} ${TZ} ${HOST} ${PROGRAM} ${MSG}\n")
    owner(root)
    group(adm)
    perm(0640)
    dir_perm(0750)
    create_dirs(yes)
  );
};

log { source(s_all); destination(d_all); };
